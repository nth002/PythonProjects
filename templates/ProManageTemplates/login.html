{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/aos/aos.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">

    <style>
        .divider:after,
        .divider:before {
            content: "";
            flex: 1;
            height: 1px;
            background: #eee;
        }

        .h-custom {
            height: calc(100% - 73px);
        }

        @media (max-width: 450px) {
            .h-custom {
                height: 100%;
            }
        }

        .box-CAPTCHA {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .reload {
            height: 42px;
            margin-left: 10px;
            padding: 10px 15px;
            border: none;
            background-color: #f1f1f1;
            cursor: pointer;
            /* border-radius: 8px; */
            transition: background-color 0.3 sease;
            /* box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); */
            display: flex;
            align-items: center;

        }
    </style>
</head>
<body>
<section class="vh-100">
    <input type="hidden" id="hiddenCaptchaText" value=""/>
    <div class="container-fluid h-custom">
        <div class="row d-flex justify-content-center align-items-center h-100" style="padding: 9rem">
            <div class="col-md-9 col-lg-6 col-xl-5">
                <img src="{% static 'assets/img/draw2.webp' %}" class="img-fluid" alt="Sample image">
            </div>
            <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1" style="margin-top: -3rem;">
                <form>
                    <div class="d-flex flex-row align-items-center justify-content-center justify-content-lg-start">
                        <p class="lead fw-normal mb-0 me-3">Sign in with</p>
                        <button type="button" class="btn btn-primary btn-floating mx-1"
                                style="background: #dc3545; border: #dc3545">
                            <i class="fab fa-facebook-f"></i>
                        </button>
                        <button type="button" style="background: #dc3545; border: #dc3545"
                                class="btn btn-primary btn-floating mx-1">
                            <i class="fab fa-twitter"></i>
                        </button>
                        <button type="button" style="background: #dc3545; border: #dc3545"
                                class="btn btn-primary btn-floating mx-1">
                            <i class="fab fa-linkedin-in"></i>
                        </button>
                    </div>
                    <div class="divider d-flex align-items-center my-4">
                        <p class="text-center fw-bold mx-3 mb-0">Or</p>
                    </div>
                    <div class="form-outline mb-4">
                        <input type="email" id="email_contact" class="form-control form-control-lg"
                               placeholder="Enter a valid email address"/>
                        <label class="form-label" for="email_contact">Email address</label>
                    </div>
                    <div class="form-outline mb-3">
                        <input type="password" id="password" class="form-control form-control-lg"
                               placeholder="Enter password"/>
                        <label class="form-label" for="password">Password</label>
                    </div>
                    <div class="form-outline mb-3">
                        <div class="form-group mb-2">
                            <div class="box-CAPTCHA" id="box-CAPTCHA">
                                <canvas id="captchaCanvas" width="220" height="40"></canvas>
                                <button class="reload" type="button" onclick="generateCAPTCHA()">
                                    <i class="fas fa-sync-alt" style="color: #0d6efd;"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="form-outline mb-3">
                        <div class="form-group mb-2">
                            <input class="form-control" id="captcha_input" maxlength="100" minlength="3"
                                   autofocus="true" required="true" placeholder="Enter CAPTCHA"
                                   name="captcha_input" type="text">
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="form-check mb-0">
                            <input class="form-check-input me-2" type="checkbox" id="form2Example3"/>
                            <label class="form-check-label" for="form2Example3">Remember me</label>
                        </div>
                        <a href="#" class="text-body">Forgot password?</a>
                    </div>
                    <div class="text-center text-lg-start mt-4 pt-2">
                        <button type="button" id="login" class="btn btn-danger btn-lg"
                                style="padding-left: 2.5rem; padding-right: 2.5rem;">Login
                        </button>
                        <p class="small fw-bold mt-2 pt-1 mb-0">Don't have an account? <a href="#" class="link-danger">Register</a>
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="d-flex flex-column flex-md-row text-center text-md-start justify-content-between py-4 px-4 px-xl-5 bg-danger">
        <div class="text-white mb-3 mb-md-0">Copyright Â© 2020. All rights reserved.</div>
        <div>
            <a href="#" class="text-white me-4"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="text-white me-4"><i class="fab fa-twitter"></i></a>
            <a href="#" class="text-white me-4"><i class="fab fa-google"></i></a>
            <a href="#" class="text-white"><i class="fab fa-linkedin-in"></i></a>
        </div>
    </div>
</section>
<!-- Vendor JS Files -->
<script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>
<script src="{% static 'assets/vendor/aos/aos.js' %}"></script>
<script src="{% static 'assets/vendor/swiper/swiper-bundle.min.js' %}"></script>
<script src="{% static 'assets/vendor/glightbox/js/glightbox.min.js' %}"></script>
<script src="{% static 'assets/vendor/imagesloaded/imagesloaded.pkgd.min.js' %}"></script>
<script src="{% static 'assets/vendor/isotope-layout/isotope.pkgd.min.js' %}"></script>
<script src="{% static 'assets/vendor/js/jquery.min.js' %}"></script>
<script src="{% static 'assets/vendor/js/sweetalert.min.js' %}"></script>
<script src="{% static 'assets/js/login.js' %}"></script>
<script>
    var captchaText = ""; // Variable to store the CAPTCHA text

        function generateRandomCaptcha() {
            const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            let captcha = "";
            for (let i = 0; i < 6; i++) {
                captcha += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            return captcha;
        }

        function drawCaptcha(captchaText) {
            const canvas = document.getElementById("captchaCanvas");
            const ctx = canvas.getContext("2d");

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = "#f0f0f0";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.font = "20px Arial";
            ctx.fillStyle = "#000";
            ctx.textBaseline = "middle";
            ctx.textAlign = "center";

            const angle = (Math.random() - 0.5) * 0.3;
            ctx.translate(canvas.width / 2, canvas.height / 2);
            ctx.rotate(angle);

            ctx.fillText(captchaText, 0, 0);

            ctx.rotate(-angle);
            ctx.translate(-canvas.width / 2, -canvas.height / 2);

            for (let i = 0; i < 5; i++) {
                ctx.strokeStyle = `rgba(0, 0, 0, ${Math.random() * 0.5})`;
                ctx.beginPath();
                ctx.moveTo(Math.random() * canvas.width, Math.random() * canvas.height);
                ctx.lineTo(Math.random() * canvas.width, Math.random() * canvas.height);
                ctx.stroke();
            }
        }

        function generateCAPTCHA() {
            captchaText = generateRandomCaptcha();
            drawCaptcha(captchaText);
            $("#hiddenCaptchaText").val(captchaText);
        }

        document.addEventListener("DOMContentLoaded", function () {
            generateCAPTCHA();
        });
</script>
</body>
</html>
